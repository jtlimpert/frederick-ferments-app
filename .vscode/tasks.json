{
    "version": "2.0.0",
    "tasks": [
        {
            "label": "ðŸš€ Start Full Dev Environment (Recommended)",
            "type": "shell",
            "command": "./scripts/dev-start.sh",
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new",
                "focus": true
            },
            "problemMatcher": []
        },
        {
            "label": "Start Database",
            "type": "shell",
            "command": "docker-compose",
            "args": ["up"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Stop Database", 
            "type": "shell",
            "command": "docker-compose",
            "args": ["down"],
            "group": "build"
        },
        {
            "label": "Connect to Database",
            "type": "shell",
            "command": "docker",
            "args": ["exec", "-it", "frederick-ferments-db", "psql", "-U", "postgres", "-d", "frederick_ferments"],
            "group": "build"
        },
        {
            "label": "Start GraphQL Server (Local)",
            "type": "shell",
            "command": "cargo",
            "args": ["run"],
            "options": {
                "cwd": "${workspaceFolder}/backend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": "$rustc"
        },
        {
            "label": "Start GraphQL Server (Watch Mode)",
            "type": "shell",
            "command": "cargo",
            "args": ["watch", "-x", "run"],
            "options": {
                "cwd": "${workspaceFolder}/backend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            },
            "problemMatcher": "$rustc"
        },
        {
            "label": "Start Full Stack (Docker)",
            "type": "shell",
            "command": "docker-compose",
            "args": ["up", "--build"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Start Full Stack (Local API)",
            "dependsOrder": "sequence",
            "dependsOn": [
                "Start Database",
                "Start GraphQL Server (Local)"
            ],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Stop All Services",
            "type": "shell",
            "command": "docker-compose",
            "args": ["down"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always"
            }
        },
        {
            "label": "Build API Docker Image",
            "type": "shell",
            "command": "docker-compose",
            "args": ["build", "api"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Restart GraphQL Server",
            "type": "shell",
            "command": "cargo",
            "args": ["run"],
            "options": {
                "cwd": "${workspaceFolder}/backend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new",
                "clear": true
            },
            "problemMatcher": "$rustc"
        },
        {
            "label": "Check GraphQL Server Health",
            "type": "shell",
            "command": "curl",
            "args": [
                "-X", "POST",
                "-H", "Content-Type: application/json",
                "-d", "{\"query\":\"query{ping}\"}",
                "http://localhost:4000/graphql"
            ],
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "shared"
            }
        },
        {
            "label": "Flutter: Run (Select Device)",
            "type": "shell",
            "command": "flutter",
            "args": ["run"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Flutter: Run Web",
            "type": "shell",
            "command": "flutter",
            "args": ["run", "-d", "chrome"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Flutter: Run macOS",
            "type": "shell",
            "command": "flutter",
            "args": ["run", "-d", "macos"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Flutter: Run iOS Simulator",
            "type": "shell",
            "command": "flutter",
            "args": ["run", "-d", "ios"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "new"
            }
        },
        {
            "label": "Flutter: Hot Reload",
            "type": "shell",
            "command": "echo",
            "args": ["Press 'r' in the Flutter terminal for hot reload"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "shared"
            }
        },
        {
            "label": "Flutter: Clean",
            "type": "shell",
            "command": "flutter",
            "args": ["clean"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build"
        },
        {
            "label": "Flutter: Get Packages",
            "type": "shell",
            "command": "flutter",
            "args": ["pub", "get"],
            "options": {
                "cwd": "${workspaceFolder}/frontend"
            },
            "group": "build"
        },
        {
            "label": "Flutter: Stop All Devices",
            "type": "shell",
            "command": "killall Simulator 2>/dev/null || true; adb emu kill 2>/dev/null || true; pkill -f 'flutter run' 2>/dev/null || true",
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "panel": "shared"
            }
        }
    ]
}